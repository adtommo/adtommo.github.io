<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />
    <title>Secrets Manager - adtommo-notes</title>
  </head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">adtommo-notes</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">Secrets Manager</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1692787714616"
                  >2023-08-23 11:48</time
                ></span
              >
              <span
                >Updated At：<time datetime="1692800568917"
                  >2023-08-23 15:22</time
                ></span
              >
            </div>
            
            <div>
              Keywords: 
              <span class="keyword">Auth &amp; Security</span>
              
              <span class="keyword">AWS Developer Associate (DVA-C02)</span>
              
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="intro">Intro</h1>
<ul>
<li>For storing secrets only</li>
<li><strong>Mandatory encryption</strong> using KMS</li>
<li><strong>Each secret can have multiple key-value pairs</strong></li>
<li><strong>Ability to force rotation of secrets every n days</strong> (not available in Parameter Store)</li>
<li><strong>Well integrated with SQL databases</strong> like MySQL, PostgreSQL, RDS and Aurora to store DB username and password</li>
<li><strong>Automated secret rotation using Lambda</strong> (needs IAM permission)</li>
<li>Mostly used for <strong>RDS authentication</strong>
<ul>
<li>need to specify the username and password to access the database</li>
<li>link the secret to the database to allow for automatic rotation of database login info</li>
</ul>
</li>
<li>Can create custom secrets</li>
<li><strong>Secrets are retained after deletion for 7 - 30</strong> (default) days (waiting period)</li>
</ul>
<h1 id="integration-with-rds-aurora-using-cloudformation">Integration with RDS &amp; Aurora using CloudFormation</h1>
<h2 id="method-1">Method 1</h2>
<ul>
<li>Setting <code>ManageMasterUserPassword: True</code> for RDS &amp; Aurora creates admin secret automatically</li>
<li>The secret ARN can be retrieved using the <code>!GetAtt</code> func</li>
</ul>
<p><img src="/_resources/9e796609a82a4ffbb4c28ba66671f2b1.png" />{width=60%}</p>
<h2 id="method-2">Method 2</h2>
<ul>
<li>Create a secret in the CloudFormation template and reference it in the RDS or Aurora DB</li>
</ul>
<p><img src="/_resources/87888dd2b07842bb82f900d1ef5f7ca4.png" /></p>
</div>
      </article>
    </div>
  </body>
</html>